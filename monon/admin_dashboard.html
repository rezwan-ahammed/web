<!-- The overall HTML structure and CSS are unchanged -->
<!-- The change is inside the JavaScript's renderExamForm function -->
<script>
    // ... (Firebase config, Auth Guard, state management are unchanged) ...

    function renderExamForm(examId = null) {
        const exam = examId ? appState.exams[examId] : null;
        // ... (The form's outer HTML is the same) ...
        formCard.innerHTML = `
            <h2>${exam ? 'Edit Exam' : 'Create New Exam'}</h2>
            <form id="create-exam-form">
                <input type="hidden" id="exam-id-hidden" value="${examId || ''}">
                <div class="form-group"><label>Exam Title</label><input type="text" id="exam-title" value="${exam ? exam.title : ''}" required></div>
                <div class="form-group"><label>Duration (Minutes)</label><input type="number" id="exam-duration" value="${exam ? exam.duration : ''}" required></div>
                
                <!-- NEW FIELDS FOR CLASS AND DATE -->
                <div class="form-group">
                    <label for="exam-class">Assign to Class</label>
                    <select id="exam-class" required>
                        <option value="" disabled ${!exam ? 'selected' : ''}>Select a class</option>
                        <option value="9" ${exam && exam.assignedClass === '9' ? 'selected' : ''}>Class 9</option>
                        <option value="10" ${exam && exam.assignedClass === '10' ? 'selected' : ''}>Class 10</option>
                        <option value="11" ${exam && exam.assignedClass === '11' ? 'selected' : ''}>Class 11 (HSC 1st Year)</option>
                        <option value="12" ${exam && exam.assignedClass === '12' ? 'selected' : ''}>Class 12 (HSC 2nd Year)</option>
                        <option value="admission" ${exam && exam.assignedClass === 'admission' ? 'selected' : ''}>University Admission</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exam-date">Exam Date</label>
                    <input type="date" id="exam-date" value="${exam ? exam.examDate : ''}" required>
                </div>

                <!-- ... (Questions container and other buttons are the same) ... -->
            </form>`;
        // ... (Rest of the renderExamForm logic) ...
    }

    async function handleExamFormSubmit(e) {
        e.preventDefault();
        // ... (Get existing form values like title, duration, questions) ...
        
        const examData = {
            title: document.getElementById('exam-title').value,
            duration: parseInt(document.getElementById('exam-duration').value),
            assignedClass: document.getElementById('exam-class').value,
            examDate: document.getElementById('exam-date').value,
            questions: [] // populated from the form
        };

        if (!examData.assignedClass || !examData.examDate) {
            return alert("Please assign a class and a date for the exam.");
        }
        
        // ... (Rest of the save-to-Firebase logic is the same) ...
    }

    // ... (All other dashboard functions are unchanged) ...
</script>
